<!DOCTYPE html>
<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>BootZard - Bootstrap Wizard Template</title>

        <!-- CSS -->
        <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:400,100,300,500">
        <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
        <link rel="stylesheet" href="assets/font-awesome/css/font-awesome.min.css">
		    <link rel="stylesheet" href="assets/css/form-elements.css">
        <link rel="stylesheet" href="assets/css/style.css">

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <!-- Favicon and touch icons -->

        <!-- Plugin file -->
        <link rel="stylesheet" href="./css/addons/datatables.min.css">
        <link rel="stylesheet" href="css/mdb.min.css">

    </head>

    <body>

		<!-- Top menu -->
		<nav class="navbar navbar-inverse navbar-no-bg" role="navigation">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#top-navbar-1">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="index.html">BootZard - Bootstrap Wizard Template</a>
				</div>
				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="top-navbar-1">
					<ul class="nav navbar-nav navbar-right">
						<li>
							<span class="li-text">
								Put some text or
							</span>
							<a href="#"><strong>links</strong></a>
							<span class="li-text">
								here, or some icons:
							</span>
							<span class="li-social">
								<a href="https://www.facebook.com/pages/Azmindcom/196582707093191" target="_blank"><i class="fa fa-facebook"></i></a>
								<a href="https://twitter.com/anli_zaimi" target="_blank"><i class="fa fa-twitter"></i></a>
								<a href="https://plus.google.com/+AnliZaimi_azmind" target="_blank"><i class="fa fa-google-plus"></i></a>
								<a href="https://github.com/AZMIND" target="_blank"><i class="fa fa-github"></i></a>
							</span>
						</li>
					</ul>
				</div>
			</div>
		</nav>

        <!-- Top content -->
        <div class="top-content">
            <div class="container">

                <div class="row">
                    <div class="col-sm-8 col-sm-offset-2 text">
                        <h1>Personal <strong>Key Indicators</strong> of Heart Disease</h1>
                        <div class="description">
                       	    <p>
                                This is a free test based on the <strong>2020 annual CDC survey data </strong> to identify key indicators for a heart disease.
                                This predictive model uses machine learning to analyze your data and provide an estimation of your current risk.
                            </p>
                            <p>
                              <strong>Disclaimer: This is not a medical advice. </strong>
                            </p>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3 form-box">
                    	<form role="form" action="" method="post" class="f1">

                    		<h3>Anwser the following questions</h3>
                    		<p>Fill in the form to get your results</p>
                    		<div class="f1-steps">
                    			<div class="f1-progress">
                    			    <div class="f1-progress-line" data-now-value="2.95" data-number-of-steps="17" style="width: 2.95%;"></div>
                    			</div>
                    			<div class="f1-step active">
                    				<div class="f1-step-icon"><i class="fa fa-user"></i></div>
                    				<p>about</p>
                    			</div>

                          <div class="f1-step">
                    			</div>
                          <div class="f1-step">
                    			</div>
                          <div class="f1-step">
                    			</div>

                    			<div class="f1-step">
                            <div class="f1-step-icon"><i class="fa fa-bicycle"></i></div>
                    				<p>habits</p>
                    			</div>

                          <div class="f1-step">
                    			</div>
                          <div class="f1-step">
                    			</div>

                    		    <div class="f1-step">
                    				<div class="f1-step-icon"><i class="fa fa-heartbeat "></i></div>
                    				<p>health</p>
                    			</div>

                          <div class="f1-step">
                    			</div>
                          <div class="f1-step">
                    			</div>
                          <div class="f1-step">
                    			</div>
                          <div class="f1-step">
                    			</div>

                          <div class="f1-step">
                          <div class="f1-step-icon"><i class="fa fa-medkit "></i></div>
                          <p>affections</p>
                        </div>

                        <div class="f1-step">
                        </div>
                        <div class="f1-step">
                        </div>
                        <div class="f1-step">
                        </div>
                        <div class="f1-step">
                        </div>


                    		</div>

                        <fieldset>
                          <h4>Are you male or female?</h4>
                          <div class="form-group">
                            <input type="radio" name="sex"  id="sex" value="female" checked="checked"> Female
                            <input type="radio" name="sex" id="sex" value="male"> Male
                          </div>

                          <div class="f1-buttons">
                            <button type="button" class="btn btn-next">Next</button>
                          </div>
                        </fieldset>


                        <fieldset>
                          <h4>Select your age category:</h4>
                          <select name="agecategory" id="agecategory">
                            <option value="18-24">18-24</option>
                            <option value="25-29">25-29</option>
                            <option value="30-34">30-34</option>
                            <option value="35-39">35-39</option>
                            <option value="40-44">40-44</option>
                            <option value="45-49">45-49</option>
                            <option value="50-54">50-54</option>
                            <option value="55-59">55-59</option>
                            <option value="60-64">60-64</option>
                            <option value="65-69">65-69</option>
                            <option value="70-74">70-74</option>
                            <option value="75-79">75-79</option>
                            <option value="80 or older">80 or older</option>
                          </select>

                          <div class="f1-buttons">
                            <button type="button" class="btn btn-previous">Previous</button>
                            <button type="button" class="btn btn-next">Next</button>
                          </div>
                        </fieldset>


                        <fieldset>
                          <h4>Which race/ethnicity best describes you?</h4>
                          <select name="race" id="race">
                            <option value="american indian/alaskan native">american indian/alaskan native</option>
                            <option value="asian">asian</option>
                            <option value="black">black</option>
                            <option value="hispanic">hispanic</option>
                            <option value="white">white</option>
                            <option value="other">other</option>
                          </select>

                          <div class="f1-buttons">
                            <button type="button" class="btn btn-previous">Previous</button>
                            <button type="button" class="btn btn-next">Next</button>
                          </div>
                        </fieldset>

                        <fieldset>
                          <h4>What is your BMI?</h4>
                          <div class="form-group">
                            <input type="number" name="bmi" id="bmi" min="12" max="92" step="0.01" value="22.00" class="text-center">
                          </div>

                          <div class="f1-buttons">
                            <button type="button" class="btn btn-previous">Previous</button>
                            <button type="button" class="btn btn-next">Next</button>
                          </div>
                        </fieldset>


                        <fieldset>
                          <h4>Have you smoked at least 100 cigarettes in your entire life? [Note: 5 packs = 100 cigarettes]</h4>
                          <div class="form-group">
                              <input type="radio" name="smoking" id='smoking' value="yes" checked="checked"> Yes
                              <input type="radio" name="smoking" id='smoking' value="no"> No
                          </div>

                          <div class="f1-buttons">
                            <button type="button" class="btn btn-previous">Previous</button>
                            <button type="button" class="btn btn-next">Next</button>
                          </div>
                        </fieldset>

                        <fieldset>
                          <h4>Do you drink alcohol on a regular basis? (men 14 drinks per week, women 7 drinks per week)</h4>
                          <div class="form-group">
                            <input type="radio" name="alcoholdrinking" id='alcoholdrinking' value="yes" checked="checked"> Yes
                            <input type="radio" name="alcoholdrinking" id='alcoholdrinking' value="no"> No
                          </div>

                          <div class="f1-buttons">
                            <button type="button" class="btn btn-previous">Previous</button>
                            <button type="button" class="btn btn-next">Next</button>
                          </div>
                        </fieldset>


                        <fieldset>
                          <h4>Do you perform any physical activity or exercise during the past 30 days other than
                            your regular daily activities?</h4>
                          <div class="form-group">
                            <input type="radio" name="physicalactivity" id='physicalactivity' value="yes" checked="checked"> Yes
                            <input type="radio" name="physicalactivity" id='physicalactivity' value="no"> No
                          </div>

                          <div class="f1-buttons">
                            <button type="button" class="btn btn-previous">Previous</button>
                            <button type="button" class="btn btn-next">Next</button>
                          </div>
                        </fieldset>

                        <fieldset>
                          <h4>Now thinking about your physical health, which includes physical illness and injury,
                            for how many days during the past 30 days was your physical health not good? (0-30 days)</h4>
                          <div class="form-group">
                            <input type="number" name="physicalhealth" id="physicalhealth" min="0" max="30" value="0" class="text-center">
                          </div>

                          <div class="f1-buttons">
                            <button type="button" class="btn btn-previous">Previous</button>
                            <button type="button" class="btn btn-next">Next</button>
                          </div>
                        </fieldset>

                        <fieldset>
                          <h4>Thinking about your mental health, for how many days during the past 30 days was your
                            mental health not good? (0-30 days)</h4>
                          <div class="form-group">
                            <input type="number" name="mentalhealth" id="mentalhealth" min="0" max="30" value="0" class="text-center">
                          </div>

                          <div class="f1-buttons">
                            <button type="button" class="btn btn-previous">Previous</button>
                            <button type="button" class="btn btn-next">Next</button>
                          </div>
                        </fieldset>


                        <fieldset>
                          <h4>Do you have serious difficulty walking or climbing stairs?</h4>
                          <div class="form-group">
                            <input type="radio" name="diffwalking" id='diffwalking' value="yes" checked="checked"> Yes
                            <input type="radio" name="diffwalking" id='diffwalking' value="no"> No
                          </div>

                          <div class="f1-buttons">
                            <button type="button" class="btn btn-previous">Previous</button>
                            <button type="button" class="btn btn-next">Next</button>
                          </div>
                        </fieldset>

                        <fieldset>
                          <h4>Would you say that in general your health is...</h4>
                          <select name="genhealth" id="genhealth">
                            <option value="excellent">excellent</option>
                            <option value="very good">very good</option>
                            <option value="good">good</option>
                            <option value="fair">fair</option>
                            <option value="poor">poor</option>
                          </select>

                          <div class="f1-buttons">
                            <button type="button" class="btn btn-previous">Previous</button>
                            <button type="button" class="btn btn-next">Next</button>
                          </div>
                        </fieldset>


                        <fieldset>
                          <h4>On average, how many hours of sleep do you get in a 24-hour period?</h4>
                          <div class="form-group">
                            <input type="number" name="sleeptime" id="sleeptime" min="1" max="24" value="7" class="text-center">
                          </div>

                          <div class="f1-buttons">
                            <button type="button" class="btn btn-previous">Previous</button>
                            <button type="button" class="btn btn-next">Next</button>
                          </div>
                        </fieldset>


                        <fieldset>
                          <h4>Have you ever had an stroke?</h4>
                          <div class="form-group">
                            <input type="radio" name="stroke" id='stroke' value="yes" checked="checked"> Yes
                            <input type="radio" name="stroke" id='stroke' value="no"> No
                          </div>

                          <div class="f1-buttons">
                            <button type="button" class="btn btn-previous">Previous</button>
                            <button type="button" class="btn btn-next">Next</button>
                          </div>
                        </fieldset>

                        <fieldset>
                          <h4>Do you have diabetes?</h4>
                          <div class="form-group">
                            <input type="radio" name="diabetic" id='diabetic' value="yes" checked="checked"> Yes
                            <input type="radio" name="diabetic" id='diabetic' value="no"> No
                          </div>

                          <div class="f1-buttons">
                            <button type="button" class="btn btn-previous">Previous</button>
                            <button type="button" class="btn btn-next">Next</button>
                          </div>
                        </fieldset>

                        <fieldset>
                          <h4>Do you have asthma?</h4>
                          <div class="form-group">
                            <input type="radio" name="asthma" id='asthma' value="yes" checked="checked"> Yes
                            <input type="radio" name="asthma" id='asthma' value="no"> No
                          </div>

                          <div class="f1-buttons">
                            <button type="button" class="btn btn-previous">Previous</button>
                            <button type="button" class="btn btn-next">Next</button>
                          </div>
                        </fieldset>


                        <fieldset>
                          <h4>Not including kidney stones, bladder infection or incontinence, were you ever told you
                            had kidney disease?</h4>
                          <div class="form-group">
                            <input type="radio" name="kidneydisease" id='kidneydisease' value="yes" checked="checked"> Yes
                            <input type="radio" name="kidneydisease" id='kidneydisease' value="no"> No
                          </div>

                          <div class="f1-buttons">
                            <button type="button" class="btn btn-previous">Previous</button>
                            <button type="button" class="btn btn-next">Next</button>
                          </div>
                        </fieldset>


                        <fieldset>
                          <h4>Do you have skin cancer?</h4>
                          <div class="form-group">
                            <input type="radio" name="skincancer" id='skincancer' value="yes" checked="checked"> Yes
                            <input type="radio" name="skincancer" id='skincancer' value="no"> No
                          </div>

                          <div class="f1-buttons">
                            <button type="button" class="btn btn-previous">Previous</button>
                            <!-- <button type="button" class="btn btn-next">Next</button> -->
                            <button type="button" class="btn btn-next" onclick="apiCall();">Submit</button>
                          </div>
                        </fieldset>

                        <fieldset>
                          <h4>Based on your data we found that your risk score over 100 is...</h4>
                          <div class="form-group">
                            <output id="probability" style="font-size:100px"></output>
                            Danger Zone:<output id="danger" style="color:white"></output>
                          </div>

                          <canvas id="pieChart" style="max-width: 500px;"></canvas>

                          <div class="f1-buttons">
                            <button type="button" class="btn btn-previous">Previous</button>
                          </div>
                        </fieldset>


<!--
                            <fieldset>
                                <h4>Set up your account:</h4>
                                <div class="form-group">
                                    <label class="sr-only" for="f1-email">Email</label>
                                    <input type="text" name="f1-email" placeholder="Email..." class="f1-email form-control" id="f1-email">
                                </div>
                                <div class="form-group">
                                    <label class="sr-only" for="f1-password">Password</label>
                                    <input type="password" name="f1-password" placeholder="Password..." class="f1-password form-control" id="f1-password">
                                </div>
                                <div class="form-group">
                                    <label class="sr-only" for="f1-repeat-password">Repeat password</label>
                                    <input type="password" name="f1-repeat-password" placeholder="Repeat password..."
                                                        class="f1-repeat-password form-control" id="f1-repeat-password">
                                </div>
                                <div class="f1-buttons">
                                    <button type="button" class="btn btn-previous">Previous</button>
                                    <button type="button" class="btn btn-next">Next</button>
                                </div>
                            </fieldset>

                            <fieldset>
                                <h4>Social media profiles:</h4>
                                <div class="form-group">
                                    <label class="sr-only" for="f1-facebook">Facebook</label>
                                    <input type="text" name="f1-facebook" placeholder="Facebook..." class="f1-facebook form-control" id="f1-facebook">
                                </div>
                                <div class="form-group">
                                    <label class="sr-only" for="f1-twitter">Twitter</label>
                                    <input type="text" name="f1-twitter" placeholder="Twitter..." class="f1-twitter form-control" id="f1-twitter">
                                </div>
                                <div class="form-group">
                                    <label class="sr-only" for="f1-google-plus">Google plus</label>
                                    <input type="text" name="f1-google-plus" placeholder="Google plus..." class="f1-google-plus form-control" id="f1-google-plus">
                                </div>
                                <div class="f1-buttons">
                                    <button type="button" class="btn btn-previous">Previous</button>
                                    <button type="button" class="btn btn-submit" onclick="apiCall();">Submit</button>
                                </div>
                            </fieldset>
-->

                    	</form>
                    </div>
                </div>

            </div>
        </div>


        <!-- Javascript -->
        <script src="assets/js/jquery-1.11.1.min.js"></script>
        <script src="assets/bootstrap/js/bootstrap.min.js"></script>
        <script src="assets/js/jquery.backstretch.min.js"></script>
        <script src="assets/js/retina-1.1.0.min.js"></script>
        <script src="assets/js/scripts.js"></script>

        <script type="text/javascript" src="js/popper.min.js"></script>
        <script type="text/javascript" src="js/mdb.min.js"></script>
        <!-- Plugin file -->
        <script src="./js/addons/datatables.min.js"></script>

        <script type="text/javascript">



          async function apiCall() {
            var sex = document.querySelector("#sex").value;
            var agecategory = document.querySelector("#agecategory").value;
            var race = document.querySelector("#race").value;

            var bmi = parseFloat(document.querySelector("#bmi").value);
            var smoking = document.querySelector("#smoking").value;
            var alcoholdrinking = document.querySelector("#alcoholdrinking").value;
            var physicalactivity = document.querySelector("#physicalactivity").value;
            var physicalhealth = parseFloat(document.querySelector("#physicalhealth").value);
            var mentalhealth = parseFloat(document.querySelector("#mentalhealth").value);
            var diffwalking = document.querySelector("#diffwalking").value;
            var genhealth = document.querySelector("#genhealth").value;
            var sleeptime = parseFloat(document.querySelector("#sleeptime").value);
            var stroke = document.querySelector("#stroke").value;
            var diabetic = document.querySelector("#diabetic").value;
            var asthma = document.querySelector("#asthma").value;
            var kidneydisease = document.querySelector("#kidneydisease").value;
            var skincancer = document.querySelector("#skincancer").value;

            var json = {
              sex,
              agecategory,
              race,
              bmi,
              smoking,
              alcoholdrinking,
              physicalactivity,
              physicalhealth,
              mentalhealth,
              diffwalking,
              genhealth,
              sleeptime,
              stroke,
              diabetic,
              asthma,
              kidneydisease,
              skincancer
            }
            //alert(JSON.stringify(json));
            try {
              var result = await fetch('http://ec2-34-205-144-216.compute-1.amazonaws.com:8080/predict', {
              //var result = await fetch('http://localhost:9696/predict', {
                method: 'POST',
                mode: 'cors',
                cache: 'no-cache',
                credentials: 'omit',
                headers: {
                  'Content-Type': 'application/json'
                  // 'Content-Type': 'application/x-www-form-urlencoded',
                },
                redirect: 'follow',
                referrerPolicy: 'no-referrer',
                body: JSON.stringify(json)
              });
              if (result.status === 200) {
                let prediction = await result.json();
                var pred = Math.round(prediction.probability*10000)/100;
                var q_pred = Math.round((100-pred)*100)/100;
                console.log(pred)
                console.log(q_pred)
                //alert(JSON.stringify(prediction));
                document.querySelector("#danger").innerText = prediction.danger;
                document.querySelector("#probability").innerText = pred;

                var ctxP = document.getElementById("pieChart").getContext('2d');
                var myPieChart = new Chart(ctxP, {
                  type: 'pie',
                  data: {
                    labels: ["Risk", "No Risk"],
                    datasets: [{
                      data: [pred, q_pred],
                      backgroundColor: ["#F7464A", "#46BFBD"],
                      hoverBackgroundColor: ["#FF5A5E", "#5AD3D1"]
                    }]
                  },
                  options: {
                    responsive: true
                  }
                });
              }
            } catch (e) {
              alert(`error: ${e}`)
            }
            //
          }

          //pie

          /*var ctxP = document.getElementById("pieChart").getContext('2d');
          var myPieChart = new Chart(ctxP, {
            type: 'pie',
            data: {
              labels: ["Red", "Green"],
              datasets: [{
                data: [, 100-5.36],
                backgroundColor: ["#F7464A", "#46BFBD"],
                hoverBackgroundColor: ["#FF5A5E", "#5AD3D1"]
              }]
            },
            options: {
              responsive: true
            }
          });

          function get_prob(){
            var prob = parseFloat(document.querySelector("#probability").value);
            return prob;
          }*/

        </script>

        <!--[if lt IE 10]>
            <script src="assets/js/placeholder.js"></script>
        <![endif]-->



    </body>

</html>
